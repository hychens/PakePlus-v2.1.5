import{u as e}from"./chunk-CMvwsE4m.js";import{K as t,r as a,l,I as o,V as s,P as n,R as r,n as u,as as i,am as d,ab as c,ai as p,u as m,ad as f,ag as v,al as b,w as g,O as h,Q as x,T as y,Z as w,ae as C,c as k,S as V,F as S,W as _,$ as j,ac as F,d as L,M as z,ah as T,a2 as M,a3 as P,ap as U,i as B}from"./chunk-BG8DtHa0.js";import{M as D}from"./chunk-CO-W9wvK.js";import{t as A}from"./chunk-BY3IMhEk.js";import{_ as I,b as $,u as G,i as q,e as E,t as W}from"./chunk-B1QQEMu0.js";import{d as N}from"./chunk-BhpgeEpq.js";import{_ as R}from"./chunk-DS7Wh8XH.js";import{P as O,u as H,a as J,L as K,b as Q,c as Y,d as Z,e as X,f as ee,g as te,h as ae,i as le,j as oe,k as se,l as ne,m as re,n as ue}from"./chunk-DuQ_AU3G.js";import{c as ie}from"./chunk-BeLtu-UY.js";import{t as de}from"./chunk-CdnLHXED.js";import{c as ce}from"./chunk-LrJf8m72.js";import{h as pe,v as me,x as fe}from"./chunk-FD3pif8V.js";import{S as ve,b as be,c as ge}from"./chunk-FU3iQhBg.js";import{r as he}from"./chunk-Ca7JHLSY.js";import{u as xe}from"./chunk-CQVWWOr1.js";import{s as ye}from"./chunk-D-SUFnWt.js";import{l as we}from"./chunk-DfTdyrnt.js";import{o as Ce,n as ke}from"./chunk-DmwaItTC.js";import"./chunk-lIqasEa_.js";import"./chunk-BK2xK9-g.js";import"./chunk-DSj7cenO.js";import"./chunk-C7wycN9u.js";import"./chunk-B8WK2I6s.js";import"./chunk-CZvmh32J.js";import"./chunk-DHt_odDz.js";import"./chunk-B6DJkpsW.js";import"./chunk-BQCeX3nN.js";import"./chunk-CM4-pTv8.js";import"./chunk-BXrkUfDV.js";import"./chunk-D-DsPvTv.js";import"./chunk-CC7_aw_8.js";import"./chunk-7CVvifAO.js";import"./chunk-CLSYnucs.js";import"./chunk-BenQXQHa.js";import"./chunk-Dcd9jy7q.js";import"./chunk-DezxjiP8.js";import"./chunk-Df6UfjYh.js";import"./chunk-DsM932Ci.js";import"./chunk-Ba-VP2it.js";import"./chunk-D9ZZ-3co.js";import"./chunk-B0YqPW3N.js";import"./chunk-4okX6chK.js";import"./chunk-DJ_qK68I.js";import"./chunk-qIePKIzK.js";import"./chunk-BmPdlzGV.js";import"./chunk-BgJVDY_l.js";import"./chunk-C9x4uJuS.js";import"./chunk-B_AfaIMK.js";const Ve=I(t({__name:"index",props:{columnWidth:{default:120},gutter:{default:16},fitWidth:{type:Boolean,default:!0}},setup(e,{expose:t}){i(e=>({v645454d4:`${e.gutter}px`}));const d=e,c=a(null),p=a(null);const m=A(()=>{p.value&&p.value.layout?.()},300);return l(async()=>{await async function(){c.value&&(await u(),p.value=new D(c.value,{itemSelector:".masonry-container > *",columnWidth:d.columnWidth,gutter:d.gutter,fitWidth:d.fitWidth,initLayout:!0}))}(),window.addEventListener("resize",m)}),o(()=>{p.value&&(p.value.destroy?.(),p.value=null),window.removeEventListener("resize",m),m.cancel()}),t({refreshLayout:async function(){await u(),p.value&&p.value.layout?.()}}),(e,t)=>(n(),s("div",{ref_key:"masonryContainer",ref:c,class:"masonry-container"},[r(e.$slots,"default",{},void 0,!0)],512))}}),[["__scopeId","data-v-c3011caa"]]),Se={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},_e={class:"fieldset-legend"},je={class:"flex flex-row items-center form-control"},Fe={class:""},Le={class:"label flex flex-col justify-start items-start"},ze={class:"label"},Te={class:"label-text text-left"},Me=["data-tip"],Pe=["placeholder"],Ue={class:"flex items-center justify-between w-full max-w-xs gap-2 mb-3 form-control"},Be={class:"label"},De={class:"label-text"},Ae=["checked"],Ie=t({__name:"AbilitySetting",props:{definiteTime:{required:!0},definiteTimeModifiers:{},winMusic:{type:Boolean,required:!0},winMusicModifiers:{}},emits:["update:definiteTime","update:winMusic"],setup(t){const{t:a}=e(),l=d(t,"definiteTime"),o=d(t,"winMusic");return(e,t)=>(n(),s("fieldset",Se,[c("legend",_e,p(m(a)("table.abilitySetting")),1),c("label",je,[c("div",Fe,[c("div",Le,[c("label",ze,[c("span",Te,p(m(a)("table.timedStop")),1),c("div",{class:"tooltip","data-tip":m(a)("tooltip.timedStop")},[...t[2]||(t[2]=[c("button",{class:"btn btn-circle h-4 hover:bg-base-300"}," ? ",-1)])],8,Me)]),f(c("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),type:"number",placeholder:m(a)("placeHolder.timedStop"),class:"w-full max-w-xs input input-bordered"},null,8,Pe),[[v,l.value]])])])]),c("div",Ue,[c("div",Be,[c("span",De,p(m(a)("table.playWinMusic")),1)]),c("input",{type:"checkbox",checked:o.value,class:"border-solid checkbox checkbox-secondary border",onChange:t[1]||(t[1]=e=>o.value=!o.value)},null,40,Ae)])]))}}),$e={class:"flex flex-col items-center gap-6 w-full px-12"},Ge=t({__name:"UploadDialog",props:b({importAllConfigData:{type:Function}},{visible:{type:Boolean,required:!0},visibleModifiers:{}}),emits:["update:visible"],setup(t){const l=t,o=N.useToast(),s=a("application/json"),r=d(t,"visible"),u=a(null),{t:i}=e(),p=a();async function f(e){if(!e)return void(u.value=null);/application\/json/.test(e?.type||"")?u.value=e:o.open({message:i("error.notJsonFile"),type:"error",position:"top-right"})}function v(){if(u.value){const e=u.value.data;l.importAllConfigData(e)}}return g(r,e=>{e&&p.value.showDialog()}),(e,t)=>(n(),h($,{ref_key:"uploadDialogRef",ref:p,visible:r.value,"onUpdate:visible":t[0]||(t[0]=e=>r.value=e),title:m(i)("dialog.uploadFileTitle"),"submit-func":v,class:""},{content:x(()=>[c("div",$e,[r.value?(n(),h(R,{key:0,"limit-type":s.value,mode:"json",onUploadFile:f},null,8,["limit-type"])):y("",!0)])]),_:1},8,["visible","title"]))}}),qe={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},Ee={class:"fieldset-legend"},We={class:"modal-box"},Ne={class:"text-lg font-bold"},Re={class:"py-4"},Oe={class:"modal-action"},He={method:"dialog",class:"flex gap-3"},Je={class:"flex flex-row items-center form-control"},Ke={class:""},Qe={class:"label flex flex-col justify-start items-start"},Ye={class:"label-text text-left"},Ze={class:"help"},Xe=t({__name:"DataSetting",props:{resetData:{type:Function},exportAllConfigData:{type:Function},importAllConfigData:{type:Function}},setup(t){const{t:l}=e(),o=a(),r=a(!1);return(e,a)=>(n(),s("fieldset",qe,[c("legend",Ee,p(m(l)("table.dataSetting")),1),c("dialog",{id:"my_modal_1",ref_key:"resetDataDialogRef",ref:o,class:"border-none modal"},[c("div",We,[c("h3",Ne,p(m(l)("dialog.titleTip")),1),c("p",Re,p(m(l)("dialog.dialogResetAllData")),1),c("div",Oe,[c("form",He,[c("button",{class:"btn",onClick:a[0]||(a[0]=e=>o.value.close())},p(m(l)("button.cancel")),1),c("button",{class:"btn",onClick:a[1]||(a[1]=(...e)=>t.resetData&&t.resetData(...e))},p(m(l)("button.confirm")),1)])])])],512),w(Ge,{visible:r.value,"onUpdate:visible":a[2]||(a[2]=e=>r.value=e),"import-all-config-data":t.importAllConfigData},null,8,["visible","import-all-config-data"]),c("label",Je,[c("div",Ke,[c("div",Qe,[c("span",Ye,p(m(l)("table.resetAllData")),1),c("div",Ze,[c("button",{class:"btn btn-sm btn-primary",onClick:a[3]||(a[3]=e=>o.value.showModal())},p(m(l)("button.resetAllData")),1)])])])])]))}}),et={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},tt={class:"fieldset-legend"},at={class:"flex flex-row items-center form-control"},lt={class:""},ot={class:"label"},st={class:"label-text"},nt={class:"help"},rt={key:0,class:"text-xs text-red-400 help-text"},ut={class:"join"},it=["data-tip"],dt=["disabled"],ct={class:"loading loading-ring loading-md"},pt={class:"flex flex-row w-full max-w-xs gap-10 form-control"},mt={class:"label"},ft={class:"label-text"},vt={class:"label"},bt={class:"label-text"},gt={class:"flex items-center justify-between w-full max-w-xs gap-2 mb-3 form-control"},ht={class:"label"},xt={class:"label-text"},yt=["checked"],wt={class:"flex items-center justify-between w-full max-w-xs gap-2 mb-3 form-control"},Ct={class:"label"},kt={class:"label-text"},Vt=["checked"],St=t({__name:"LayoutSetting",props:b({resetPersonLayout:{type:Function},isRowCountChange:{}},{formErr:{required:!0},formErrModifiers:{},formData:{required:!0},formDataModifiers:{},cardSizeValue:{required:!0},cardSizeValueModifiers:{},isShowPrizeListValue:{type:Boolean,required:!0},isShowPrizeListValueModifiers:{},isShowAvatarValue:{type:Boolean,required:!1},isShowAvatarValueModifiers:{}}),emits:["update:formErr","update:formData","update:cardSizeValue","update:isShowPrizeListValue","update:isShowAvatarValue"],setup(t){const{t:a}=e(),l=d(t,"formErr"),o=d(t,"formData"),r=d(t,"cardSizeValue"),u=d(t,"isShowPrizeListValue"),i=d(t,"isShowAvatarValue");return(e,d)=>(n(),s("fieldset",et,[c("legend",tt,p(m(a)("table.layoutSetting")),1),c("label",at,[c("div",lt,[c("div",ot,[c("span",st,p(m(a)("table.columnNumber")),1),c("div",nt,[l.value.rowCount?(n(),s("span",rt,p(l.value.rowCount),1)):y("",!0)])])])]),c("div",ut,[f(c("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>o.value.rowCount=e),type:"number",placeholder:"Type here",class:"w-full input input-bordered join-item"},null,512),[[v,o.value.rowCount]]),c("div",{class:"tooltip join-item","data-tip":m(a)("tooltip.resetLayout")},[c("button",{class:"btn btn-neutral w-30 join-item",disabled:1!==t.isRowCountChange,onClick:d[1]||(d[1]=(...e)=>t.resetPersonLayout&&t.resetPersonLayout(...e))},[c("span",null,p(m(a)("button.setLayout")),1),f(c("span",ct,null,512),[[C,2===t.isRowCountChange]])],8,dt)],8,it)]),c("label",pt,[c("div",null,[c("div",mt,[c("span",ft,p(m(a)("table.cardWidth")),1)]),f(c("input",{"onUpdate:modelValue":d[2]||(d[2]=e=>r.value.width=e),type:"number",placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[v,r.value.width]])]),c("div",null,[c("div",vt,[c("span",bt,p(m(a)("table.cardHeight")),1)]),f(c("input",{"onUpdate:modelValue":d[3]||(d[3]=e=>r.value.height=e),type:"number",placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[v,r.value.height]])])]),c("div",gt,[c("div",ht,[c("span",xt,p(m(a)("table.alwaysDisplay")),1)]),c("input",{type:"checkbox",checked:u.value,class:"border-solid checkbox checkbox-secondary border",onChange:d[4]||(d[4]=e=>u.value=!u.value)},null,40,yt)]),c("div",wt,[c("div",Ct,[c("span",kt,p(m(a)("table.avatarDisplay")),1)]),c("input",{type:"checkbox",checked:i.value,class:"border-solid checkbox checkbox-secondary border",onChange:d[5]||(d[5]=e=>i.value=!i.value)},null,40,Vt)])]))}}),_t={class:"w-full h-auto"},jt=["onClick"],Ft=I(t({__name:"PatternEdit",props:{rowCount:{type:Number,default:17},cardColor:{type:String,default:"#fff"},patternColor:{type:String,default:"#000"},patternList:{type:Array,default:()=>[]}},setup(e){const t=e,a=k(()=>t);return(e,t)=>(n(),s("div",_t,[c("ul",{class:"pattern-list",style:V({gridTemplateColumns:`repeat(${a.value.rowCount},1fr)`})},[(n(!0),s(S,null,_(7*a.value.rowCount,e=>(n(),s("li",{key:e,class:"w-5 h-5",style:V({backgroundColor:a.value.patternList.includes(e)?a.value.patternColor:a.value.cardColor}),onClick:j(t=>function(e,t){if(a.value.patternList.includes(t)){const e=a.value.patternList.indexOf(t);a.value.patternList.splice(e,1)}else a.value.patternList.push(t)}(0,e),["stop"])},null,12,jt))),128))],4)]))}}),[["__scopeId","data-v-9d5a1688"]]),Lt={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},zt={class:"fieldset-legend"},Tt={class:"items-center gap-24 mb-0 form-control"},Mt={class:"label"},Pt={class:"label-text"},Ut={class:"h-auto"},Bt={class:"flex w-full gap-3 m-0"},Dt=["data-tip"],At=t({__name:"PatternSetting",props:{rowCount:{},cardColor:{},patternColor:{},patternList:{},clearPattern:{type:Function},resetPattern:{type:Function}},setup(t){const{t:a}=e();return(e,l)=>(n(),s("fieldset",Lt,[c("legend",zt,p(m(a)("table.patternSetting")),1),c("div",Tt,[c("div",null,[c("label",Mt,[c("span",Pt,p(m(a)("table.patternSetting")),1)]),c("div",Ut,[w(Ft,{"row-count":t.rowCount,"card-color":t.cardColor,"pattern-color":t.patternColor,"pattern-list":t.patternList},null,8,["row-count","card-color","pattern-color","pattern-list"])])]),c("div",Bt,[c("button",{class:"mt-5 btn btn-info btn-sm",onClick:l[0]||(l[0]=j((...e)=>t.clearPattern&&t.clearPattern(...e),["stop"]))},[c("span",null,p(m(a)("button.clearPattern")),1)]),c("div",{class:"tooltip","data-tip":m(a)("tooltip.defaultLayout")},[c("button",{class:"mt-5 btn btn-info btn-sm",onClick:l[1]||(l[1]=(...e)=>t.resetPattern&&t.resetPattern(...e))},[c("span",null,p(m(a)("button.DefaultPattern")),1)])],8,Dt)])])]))}});function It(...e){return de(ie(e))}const $t=t({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e;return(a,l)=>(n(),h(m(O),{"data-slot":"button",as:e.as,"as-child":e.asChild,class:F(m(It)(m(Gt)({variant:e.variant,size:e.size}),t.class))},{default:x(()=>[r(a.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),Gt=ce("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}}),qt=t({__name:"Command",props:{modelValue:{default:""},defaultValue:{},multiple:{type:Boolean},orientation:{},dir:{},disabled:{type:Boolean},selectionBehavior:{},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(e,{emit:t}){const l=e,o=t,s=pe(l,"class"),u=H(s,o),i=a(new Map),d=a(new Map),{contains:c}=J({sensitivity:"base"}),p=L({search:"",filtered:{count:0,items:new Map,groups:new Set}});return g(()=>p.search,()=>{!function(){if(!p.search)return void(p.filtered.count=i.value.size);p.filtered.groups=new Set;let e=0;for(const[t,a]of i.value){const l=c(a,p.search);p.filtered.items.set(t,l?1:0),l&&e++}for(const[t,a]of d.value)for(const e of a)if(p.filtered.items.get(e)>0){p.filtered.groups.add(t);break}p.filtered.count=e}()}),Qt({allItems:i,allGroups:d,filterState:p}),(e,t)=>(n(),h(m(K),z({"data-slot":"command"},m(u),{class:m(It)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",l.class)}),{default:x(()=>[r(e.$slots,"default")]),_:3},16,["class"]))}}),Et=t({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,a=pe(t,"class"),{filterState:l}=Kt(),o=k(()=>!!l.search&&0===l.filtered.count);return(e,l)=>o.value?(n(),h(m(O),z({key:0,"data-slot":"command-empty"},m(a),{class:m(It)("py-6 text-center text-sm",t.class)}),{default:x(()=>[r(e.$slots,"default")]),_:3},16,["class"])):y("",!0)}}),Wt=t({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(e){const t=e,a=pe(t,"class"),{allGroups:s,filterState:u}=Kt(),i=Q(),d=k(()=>!u.search||u.filtered.groups.has(i));return Zt({id:i}),l(()=>{s.value.has(i)||s.value.set(i,new Set)}),o(()=>{s.value.delete(i)}),(l,o)=>(n(),h(m(Z),z(m(a),{id:m(i),"data-slot":"command-group",class:m(It)("text-foreground overflow-hidden p-1",t.class),hidden:!d.value||void 0}),{default:x(()=>[e.heading?(n(),h(m(Y),{key:0,"data-slot":"command-group-heading",class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:x(()=>[T(p(e.heading),1)]),_:1})):y("",!0),r(l.$slots,"default")]),_:3},16,["id","class","hidden"]))}}),Nt={"data-slot":"command-input-wrapper",class:"flex h-9 items-center gap-2 border-b px-3"},Rt=t({inheritAttrs:!1,__name:"CommandInput",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,a=pe(t,"class"),l=X(a),{filterState:o}=Kt();return(e,a)=>(n(),s("div",Nt,[w(m(ve),{class:"size-4 shrink-0 opacity-50"}),w(m(ee),z({...m(l),...e.$attrs},{modelValue:m(o).search,"onUpdate:modelValue":a[0]||(a[0]=e=>m(o).search=e),"data-slot":"command-input","auto-focus":"",class:m(It)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t.class)}),null,16,["modelValue","class"])]))}}),Ot=t({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["select"],setup(e,{emit:t}){const s=e,u=t,i=pe(s,"class"),d=H(i,u),c=Q(),{filterState:p,allItems:f,allGroups:v}=Kt(),b=Yt(),g=k(()=>{if(p.search){const e=p.filtered.items.get(c);return void 0===e||e>0}return!0}),w=a(),C=me(w);return l(()=>{if(!(C.value instanceof HTMLElement))return;f.value.set(c,C.value.textContent??s.value?.toString()??"");const e=b?.id;e&&(v.value.has(e)?v.value.get(e)?.add(c):v.value.set(e,new Set([c])))}),o(()=>{f.value.delete(c)}),(e,t)=>g.value?(n(),h(m(te),z({key:0},m(d),{id:m(c),ref_key:"itemRef",ref:w,"data-slot":"command-item",class:m(It)("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s.class),onSelect:t[0]||(t[0]=()=>{m(p).search=""})}),{default:x(()=>[r(e.$slots,"default")]),_:3},16,["id","class"])):y("",!0)}}),Ht={role:"presentation"},Jt=t({__name:"CommandList",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,a=pe(t,"class"),l=X(a);return(e,a)=>(n(),h(m(ae),z({"data-slot":"command-list"},m(l),{class:m(It)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t.class)}),{default:x(()=>[c("div",Ht,[r(e.$slots,"default")])]),_:3},16,["class"]))}}),[Kt,Qt]=le("Command"),[Yt,Zt]=le("CommandGroup"),Xt=t({__name:"Popover",props:{defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const a=H(e,t);return(e,t)=>(n(),h(m(oe),z({"data-slot":"popover"},m(a)),{default:x(t=>[r(e.$slots,"default",M(P(t)))]),_:3},16))}}),ea=t({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{default:"center"},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const a=e,l=t,o=pe(a,"class"),s=H(o,l);return(e,t)=>(n(),h(m(ne),null,{default:x(()=>[w(m(se),z({"data-slot":"popover-content"},{...e.$attrs,...m(s)},{class:m(It)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md origin-(--reka-popover-content-transform-origin) outline-hidden",a.class)}),{default:x(()=>[r(e.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ta=t({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e;return(e,a)=>(n(),h(m(re),z({"data-slot":"popover-trigger"},t),{default:x(()=>[r(e.$slots,"default")]),_:3},16))}});function aa(){const e=a(new Map),t=a(!1);return l(()=>{window.queryLocalFonts||(t.value=!0)}),{disabled:t,fonts:e,getFonts:async()=>{if(!window.queryLocalFonts)return;const t=(e=>{const t=new Map;for(const a of e){t.has(a.family)||t.set(a.family,[]);const e=t.get(a.family);if(!Array.isArray(e))continue;if(a.family===a.fullName){e.push({name:a.style,value:a.fullName});continue}const l=a.fullName.replace(a.family,"").trim(),o=a.fullName;e.push({name:l,value:o})}return t})(await window.queryLocalFonts());e.value=t}}}const la=["onMouseenter"],oa=t({__name:"SelectFont",props:b({disabled:{type:Boolean}},{selectedFont:{type:String,required:!0},selectedFontModifiers:{}}),emits:["update:selectedFont"],setup(t){const l=t,o=d(t,"selectedFont"),{getFonts:r,disabled:u,fonts:i}=aa(),f=a(!1),v=a(""),b=fe(v,20),{t:g}=e();function y(e){f.value=!1,v.value="",o.value=e}function C(e){v.value=e}function j(){v.value=""}const L=k(()=>l.disabled||u?{cursor:"not-allowed"}:{});return(e,a)=>(n(),s("div",{class:"w-full h-full flex justify-center items-center max-w-xs",style:V(L.value)},[w(m(Xt),{open:f.value,"onUpdate:open":a[2]||(a[2]=e=>f.value=e),class:"w-full"},{default:x(()=>[w(m(ta),{"as-child":"",disabled:m(u)||t.disabled},{default:x(()=>[w(m($t),{variant:"outline",role:"combobox","aria-expanded":f.value,class:"w-full justify-between truncate hover:bg-transparent hover:text-inherit",onClick:m(r)},{default:x(()=>[c("span",{class:"w-7/8 text-left truncate",style:V({fontFamily:`${o.value}`})},p(o.value||m(g)("placeHolder.selectFont")),5),w(m(be),{class:"opacity-50"})]),_:1},8,["aria-expanded","onClick"])]),_:1},8,["disabled"]),w(m(ea),{class:"w-full p-0 bg-base-100"},{default:x(()=>[w(m(qt),null,{default:x(()=>[w(m(Rt),{class:"h-9",placeholder:"Search framework..."}),w(m(Jt),{onScroll:j},{default:x(()=>[w(m(Et),null,{default:x(()=>[...a[3]||(a[3]=[T("No framework found.",-1)])]),_:1}),w(m(Wt),null,{default:x(()=>[(n(!0),s(S,null,_(m(i),([e,t])=>(n(),h(m(Ot),{key:e,value:e,class:"w-full hover:bg-gray-200/60",onSelect:t=>y(e)},{default:x(()=>[w(m(Xt),{open:m(b)===e,class:"w-full"},{default:x(()=>[w(m(ta),{class:"w-full"},{default:x(()=>[c("div",{style:V({fontFamily:`${e}`}),class:"w-full flex justify-between items-center",onMouseleave:a[0]||(a[0]=e=>C("")),onMouseenter:t=>C(e)},[T(p(e)+" ",1),w(m(ge),{class:F(m(It)("ml-auto"))},null,8,["class"])],44,la)]),_:2},1024),w(m(ea),{class:"p-2 bg-base-100",side:"right",onMouseleave:a[1]||(a[1]=e=>C("")),onMouseenter:t=>C(e)},{default:x(()=>[w(m(ue)),w(m(qt),null,{default:x(()=>[w(m(Wt),null,{default:x(()=>[(n(!0),s(S,null,_(t,t=>(n(),h(m(Ot),{key:t.value,value:t.value,class:"w-full hover:bg-gray-200/60",style:V({fontFamily:`${e}`}),onSelect:e=>y(t.value)},{default:x(()=>[T(p(t.name),1)]),_:2},1032,["value","style","onSelect"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onMouseenter"])]),_:2},1032,["open"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],4))}}),sa={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},na={class:"fieldset-legend"},ra={class:"label"},ua={class:"label"},ia={class:"label-text"},da=["placeholder"],ca={class:"w-full max-w-xs form-control"},pa={class:"label"},ma={class:"label-text"},fa={disabled:"",selected:""},va=["value"],ba={class:"w-full max-w-xs form-control"},ga={class:"label"},ha={class:"label-text"},xa={class:"w-full max-w-xs form-control mt-3"},ya={class:"label"},wa={class:"label-text"},Ca={class:"flex flex-row w-full max-w-xs mt-5 gap-10 form-control"},ka={class:"w-3/4"},Va={class:"label"},Sa={class:"label-text"},_a={class:"flex flex-col gap-4"},ja={class:"label"},Fa={class:"label-text"},La=["checked"],za=t({__name:"TextSetting",props:{languageList:{},languageListModifiers:{},topTitleValue:{default:""},topTitleValueModifiers:{},languageValue:{default:"zh-CN"},languageValueModifiers:{},textSizeValue:{},textSizeValueModifiers:{},currentFontValue:{default:"",type:String},currentFontValueModifiers:{},currentTitleFontValue:{default:"",type:String},currentTitleFontValueModifiers:{},titleFontSyncGlobalValue:{type:Boolean},titleFontSyncGlobalValueModifiers:{}},emits:["update:languageList","update:topTitleValue","update:languageValue","update:textSizeValue","update:currentFontValue","update:currentTitleFontValue","update:titleFontSyncGlobalValue"],setup(t){const{t:a}=e(),l=d(t,"languageList"),o=d(t,"topTitleValue"),r=d(t,"languageValue"),u=d(t,"textSizeValue"),i=d(t,"currentFontValue"),b=d(t,"currentTitleFontValue"),g=d(t,"titleFontSyncGlobalValue");return(e,t)=>(n(),s("fieldset",sa,[c("legend",na,p(m(a)("table.textSetting")),1),c("label",ra,[c("div",ua,[c("span",ia,p(m(a)("table.title")),1)])]),f(c("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),type:"text",placeholder:m(a)("placeHolder.enterTitle"),class:"w-full max-w-xs input input-bordered"},null,8,da),[[v,o.value]]),c("label",ca,[c("div",pa,[c("span",ma,p(m(a)("table.language")),1)]),f(c("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),"data-choose-theme":"",class:"w-full max-w-xs border-solid select border"},[c("option",fa,p(m(a)("table.language")),1),(n(!0),s(S,null,_(l.value,e=>(n(),s("option",{key:e.key,value:e.key},p(e.name),9,va))),128))],512),[[U,r.value]])]),c("label",ba,[c("div",ga,[c("span",ha,p(m(a)("table.textSize")),1)]),f(c("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),type:"number",placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[v,u.value]])]),c("label",xa,[c("div",ya,[c("span",wa,p(m(a)("table.globalFont")),1)]),w(oa,{"selected-font":i.value,"onUpdate:selectedFont":t[3]||(t[3]=e=>i.value=e)},null,8,["selected-font"])]),c("label",Ca,[c("div",ka,[c("div",Va,[c("span",Sa,p(m(a)("table.titleFont")),1)]),w(oa,{"selected-font":b.value,"onUpdate:selectedFont":t[4]||(t[4]=e=>b.value=e),disabled:g.value},null,8,["selected-font","disabled"])]),c("div",_a,[c("div",ja,[c("span",Fa,p(m(a)("table.syncGlobalFont")),1)]),c("input",{type:"checkbox",checked:g.value,class:"border-solid checkbox checkbox-secondary border",onChange:t[5]||(t[5]=e=>g.value=!g.value)},null,40,La)])])]))}}),Ta=["valentine","halloween","cmyk","winter","corporate","fantasy","aqua","pastel","lemonade","garden","silk","black","coffee","wireframe","caramellatte","acid","cyberpunk","nord","bumblebee","night","dracula","synthwave","light","dark","forest","emerald","business","cupcake","autumn","abyss","dim","lofi","sunset","luxury","retro"],Ma={class:"p-4 border text-setting fieldset bg-base-200 border-base-300 rounded-box w-xs pb-10"},Pa={class:"fieldset-legend"},Ua={class:"w-full max-w-xs form-control"},Ba={class:"label"},Da={class:"label-text"},Aa={disabled:"",selected:""},Ia=["value"],$a={class:"w-full max-w-xs form-control"},Ga={class:"label"},qa={class:"label-text"},Ea={disabled:"",selected:"",class:"w-full truncate"},Wa=["value","title"],Na={class:"truncate w-option-xs"},Ra={class:"label"},Oa={class:"grid w-full grid-cols-2 gap-4"},Ha={class:"flex flex-col items-center max-w-xs gap-1 form-control"},Ja={class:"label"},Ka={class:"label-text"},Qa={class:"flex flex-col items-center max-w-xs gap-1 form-control"},Ya={class:"label"},Za={class:"label-text"},Xa={class:"flex flex-col items-center max-w-xs gap-1 form-control"},el={class:"label"},tl={class:"label-text"},al={class:"flex flex-col items-center max-w-xs gap-1 form-control"},ll={class:"label"},ol={class:"label-text"},sl=t({__name:"ThemeSetting",props:b({imageList:{}},{themeValue:{},themeValueModifiers:{},backgroundImageValue:{},backgroundImageValueModifiers:{},cardColorValue:{},cardColorValueModifiers:{},luckyCardColorValue:{},luckyCardColorValueModifiers:{},textColorValue:{},textColorValueModifiers:{},patternColorValue:{},patternColorValueModifiers:{}}),emits:["update:themeValue","update:backgroundImageValue","update:cardColorValue","update:luckyCardColorValue","update:textColorValue","update:patternColorValue"],setup(t){const a=L(Ta),l=xe(),{t:o}=e(),r=d(t,"themeValue"),u=d(t,"backgroundImageValue"),i=d(t,"cardColorValue"),v=d(t,"luckyCardColorValue"),b=d(t,"textColorValue"),g=d(t,"patternColorValue");return(e,d)=>(n(),s("fieldset",Ma,[c("legend",Pa,p(m(o)("table.themeSetting")),1),c("div",Ua,[c("label",Ba,[c("span",Da,p(m(o)("table.theme")),1)]),f(c("select",{"onUpdate:modelValue":d[0]||(d[0]=e=>r.value=e),"data-choose-theme":"",class:"w-full max-w-xs border-solid select border"},[c("option",Aa,p(m(o)("table.theme")),1),(n(!0),s(S,null,_(a,(e,t)=>(n(),s("option",{key:t,value:e},p(e),9,Ia))),128))],512),[[U,r.value]])]),c("div",$a,[c("label",Ga,[c("span",qa,p(m(o)("table.backgroundImage")),1)]),f(c("select",{"onUpdate:modelValue":d[1]||(d[1]=e=>u.value=e),"data-choose-theme":"",class:"box-border w-full max-w-xs truncate border-solid select border"},[c("option",Ea,p(m(o)("table.backgroundImage")),1),(n(!0),s(S,null,_([{name:"❌",url:"",id:""},...t.imageList],(e,t)=>(n(),s("option",{key:t,value:e,title:e.name,class:"box-border w-full truncate"},[c("span",Na,p(e.name),1)],8,Wa))),128))],512),[[U,u.value]]),c("span",Ra,[T(p(m(o)("tooltip.pleaseGoto"))+" ",1),c("a",{class:"link link-info",onClick:d[2]||(d[2]=()=>{m(l).push("image")})},p(m(o)("sidebar.imagesManagement")),1),T(" "+p(m(o)("tooltip.uploadImage")),1)])]),c("div",Oa,[c("div",Ha,[c("label",Ja,[c("span",Ka,p(m(o)("table.cardColor")),1)]),w(m(he),{modelValue:i.value,"onUpdate:modelValue":d[3]||(d[3]=e=>i.value=e),"pure-color":i.value,"onUpdate:pureColor":d[4]||(d[4]=e=>i.value=e)},null,8,["modelValue","pure-color"])]),c("div",Qa,[c("label",Ya,[c("span",Za,p(m(o)("table.winnerColor")),1)]),w(m(he),{modelValue:v.value,"onUpdate:modelValue":d[5]||(d[5]=e=>v.value=e),"pure-color":v.value,"onUpdate:pureColor":d[6]||(d[6]=e=>v.value=e)},null,8,["modelValue","pure-color"])]),c("div",Xa,[c("label",el,[c("span",tl,p(m(o)("table.textColor")),1),d[11]||(d[11]=c("div",{class:"tooltip","data-tip":"设置文本颜色会覆盖标题样式"},[c("button",{class:"btn btn-circle h-4 hover:bg-base-300"}," ? ")],-1))]),w(m(he),{modelValue:b.value,"onUpdate:modelValue":d[7]||(d[7]=e=>b.value=e),"pure-color":b.value,"onUpdate:pureColor":d[8]||(d[8]=e=>b.value=e)},null,8,["modelValue","pure-color"])]),c("div",al,[c("label",ll,[c("span",ol,p(m(o)("table.highlightColor")),1)]),w(m(he),{modelValue:g.value,"onUpdate:modelValue":d[9]||(d[9]=e=>g.value=e),"pure-color":g.value,"onUpdate:pureColor":d[10]||(d[10]=e=>g.value=e)},null,8,["modelValue","pure-color"])])])]))}}),nl=we.createInstance({name:"imgStore"}),rl=we.createInstance({name:"audioStore"});function ul(){!async function(){await nl.clear()}(),async function(){await rl.clear()}()}function il(){const e=G().globalConfig,t=G().personConfig,o=G().prizeConfig,{getGlobalConfig:s,getTopTitle:n,getTheme:r,getPatterColor:u,getPatternList:i,getCardColor:d,getLuckyColor:c,getTextColor:p,getCardSize:m,getTextSize:f,getRowCount:v,getIsShowPrizeList:b,getLanguage:h,getBackground:x,getFont:y,getTitleFont:w,getTitleFontSyncGlobal:C,getImageList:k,getIsShowAvatar:V,getDefiniteTime:S,getWinMusic:_}=ye(e),{getAlreadyPersonList:j,getNotPersonList:F}=ye(t),L=a(0),z=a(r.value.name),T=a(structuredClone(n.value)),M=a(structuredClone(d.value)),P=a(structuredClone(c.value)),U=a(structuredClone(p.value)),B=a(structuredClone(m.value)),D=a(structuredClone(f.value)),A=a(structuredClone(v.value)),I=a(structuredClone(h.value)),$=a(structuredClone(b.value)),N=a(structuredClone(V.value)),R=a(structuredClone(u.value)),O=a(x.value),H=a(structuredClone(y.value)),J=a(structuredClone(w.value)),K=a(structuredClone(C.value)),Q=a(structuredClone(S.value)),Y=a(structuredClone(_.value)),Z=a({rowCount:A}),X=a({rowCount:""}),ee=Ce({rowCount:ke({error:q.global.t("error.require")}).min(1,q.global.t("error.minNumber1")).max(100,q.global.t("error.maxNumber100"))}),te={rowCount:Z.value.rowCount};return g(()=>Z.value.rowCount,()=>{var t;te.rowCount=Z.value.rowCount,(t=te,ee.parseAsync(t)).then(t=>{t.rowCount&&(L.value=1,e.setRowCount(t.rowCount))}).catch(e=>{X.value.rowCount=e.issues[0].message})}),g(T,t=>{e.setTopTitle(t)}),g(z,t=>{e.setTheme({name:t}),W(t)},{deep:!0}),g(M,t=>{e.setCardColor(t)},{deep:!0}),g(P,t=>{e.setLuckyCardColor(t)},{deep:!0}),g(R,t=>{e.setPatterColor(t)}),g(U,t=>{e.setTextColor(t)},{deep:!0}),g(B,t=>{e.setCardSize(t)},{deep:!0}),g($,()=>{e.setIsShowPrizeList($.value)}),g(O,t=>{e.setBackground(t)}),g(H,t=>{e.setFont(t),document.documentElement.style.setProperty("--app-font-family",`"${t}", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`)}),g(J,t=>{e.setTitleFont(t)}),g(K,t=>{e.setTitleFontSyncGlobal(t)}),g(I,t=>{e.setLanguage(t)}),g(N,()=>{e.setIsShowAvatar(N.value)}),g(Q,()=>{e.setDefiniteTime(Q.value)}),g(Y,()=>{e.setIsPlayWinMusic(Y.value)}),g(D,t=>{e.setTextSize(t)}),l(()=>{}),{resetData:function(){e.reset(),t.reset(),o.resetDefault(),ul(),window.location.reload()},topTitleValue:T,languageValue:I,textSizeValue:D,currentFontValue:H,currentTitleFontValue:J,titleFontSyncGlobalValue:K,languageList:E,formErr:X,formData:Z,cardSizeValue:B,isShowPrizeListValue:$,isShowAvatarValue:N,resetPersonLayout:function(){L.value=2,setTimeout(()=>{const e=j.value.length,a=F.value.length;if(e<=0&&a<=0)return;const l=j.value.concat(F.value),o=l.slice(0,e),s=l.slice(e,a+e);t.deleteAllPerson(),t.addNotPersonList(s),t.addAlreadyPersonList(o,null),L.value=0},1e3)},isRowCountChange:L,themeValue:z,backgroundImageValue:O,cardColorValue:M,luckyCardColorValue:P,textColorValue:U,patternColorValue:R,imageList:k,rowCount:v,cardColor:d,patternColor:u,patternList:i,clearPattern:function(){e.setPatternList([])},resetPattern:function(){e.resetPatternList()},exportAllConfigData:function(){const e=JSON.stringify(s.value,null,2),t=`data:application/json;charset=utf-8,${encodeURIComponent(e)}`,a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","global-config.json"),a.click()},importAllConfigData:function(t){e.setGlobalConfig(t),window.location.reload()},definiteTimeValue:Q,isWinMusicValue:Y}}const dl={class:"w-4/5 flex flex-col gap-4"},cl=t({__name:"index",setup(t){const{t:a}=e(),{resetData:l,topTitleValue:o,languageValue:r,textSizeValue:u,currentFontValue:i,currentTitleFontValue:d,titleFontSyncGlobalValue:f,languageList:v,formErr:b,formData:g,cardSizeValue:h,isShowPrizeListValue:y,isShowAvatarValue:C,resetPersonLayout:k,isRowCountChange:V,themeValue:S,backgroundImageValue:_,cardColorValue:j,luckyCardColorValue:F,textColorValue:L,patternColorValue:z,imageList:T,rowCount:M,cardColor:P,patternColor:U,patternList:D,clearPattern:A,resetPattern:I,exportAllConfigData:$,importAllConfigData:G,definiteTimeValue:q,isWinMusicValue:E}=il();return(e,t)=>(n(),s("div",dl,[c("h2",null,p(m(a)("viewTitle.globalSetting")),1),w(Ve,null,{default:x(()=>[w(m(Xe),{"reset-data":m(l),"export-all-config-data":m($),"import-all-config-data":m(G)},null,8,["reset-data","export-all-config-data","import-all-config-data"]),w(m(za),{"top-title-value":m(o),"onUpdate:topTitleValue":t[0]||(t[0]=e=>B(o)?o.value=e:null),"language-value":m(r),"onUpdate:languageValue":t[1]||(t[1]=e=>B(r)?r.value=e:null),"text-size-value":m(u),"onUpdate:textSizeValue":t[2]||(t[2]=e=>B(u)?u.value=e:null),"current-font-value":m(i),"onUpdate:currentFontValue":t[3]||(t[3]=e=>B(i)?i.value=e:null),"current-title-font-value":m(d),"onUpdate:currentTitleFontValue":t[4]||(t[4]=e=>B(d)?d.value=e:null),"title-font-sync-global-value":m(f),"onUpdate:titleFontSyncGlobalValue":t[5]||(t[5]=e=>B(f)?f.value=e:null),"language-list":m(v),"onUpdate:languageList":t[6]||(t[6]=e=>B(v)?v.value=e:null)},null,8,["top-title-value","language-value","text-size-value","current-font-value","current-title-font-value","title-font-sync-global-value","language-list"]),w(m(St),{"form-err":m(b),"onUpdate:formErr":t[7]||(t[7]=e=>B(b)?b.value=e:null),"form-data":m(g),"onUpdate:formData":t[8]||(t[8]=e=>B(g)?g.value=e:null),"card-size-value":m(h),"onUpdate:cardSizeValue":t[9]||(t[9]=e=>B(h)?h.value=e:null),"is-show-prize-list-value":m(y),"onUpdate:isShowPrizeListValue":t[10]||(t[10]=e=>B(y)?y.value=e:null),"is-show-avatar-value":m(C),"onUpdate:isShowAvatarValue":t[11]||(t[11]=e=>B(C)?C.value=e:null),"reset-person-layout":m(k),"is-row-count-change":m(V)},null,8,["form-err","form-data","card-size-value","is-show-prize-list-value","is-show-avatar-value","reset-person-layout","is-row-count-change"]),w(m(sl),{"theme-value":m(S),"onUpdate:themeValue":t[12]||(t[12]=e=>B(S)?S.value=e:null),"background-image-value":m(_),"onUpdate:backgroundImageValue":t[13]||(t[13]=e=>B(_)?_.value=e:null),"card-color-value":m(j),"onUpdate:cardColorValue":t[14]||(t[14]=e=>B(j)?j.value=e:null),"lucky-card-color-value":m(F),"onUpdate:luckyCardColorValue":t[15]||(t[15]=e=>B(F)?F.value=e:null),"text-color-value":m(L),"onUpdate:textColorValue":t[16]||(t[16]=e=>B(L)?L.value=e:null),"pattern-color-value":m(z),"onUpdate:patternColorValue":t[17]||(t[17]=e=>B(z)?z.value=e:null),"image-list":m(T)},null,8,["theme-value","background-image-value","card-color-value","lucky-card-color-value","text-color-value","pattern-color-value","image-list"]),w(m(At),{"row-count":m(M),"card-color":m(P),"pattern-color":m(U),"pattern-list":m(D),"clear-pattern":m(A),"reset-pattern":m(I)},null,8,["row-count","card-color","pattern-color","pattern-list","clear-pattern","reset-pattern"]),w(m(Ie),{"definite-time":m(q),"onUpdate:definiteTime":t[18]||(t[18]=e=>B(q)?q.value=e:null),"win-music":m(E),"onUpdate:winMusic":t[19]||(t[19]=e=>B(E)?E.value=e:null)},null,8,["definite-time","win-music"])]),_:1})]))}});export{cl as default};
