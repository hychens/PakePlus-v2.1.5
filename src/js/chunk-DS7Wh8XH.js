import{g as e,b as l,c as a}from"./chunk-DsM932Ci.js";import{L as s,U as t,X as u}from"./chunk-FU3iQhBg.js";import{K as n,r as i,V as o,P as c,ab as r,T as d,ac as f,O as p,u as m,Z as v,ai as y}from"./chunk-BG8DtHa0.js";const b={class:"w-full h-full flex flex-col items-center mt-6"},w=["disabled","accept"],x=["src"],h={key:2,class:"w-full h-full flex justify-center items-center flex-col gap-4"},k={key:0,class:"w-full flex items-center justify-between mt-2"},g={class:"max-w-[3/4] truncate text-sm"},j=n({__name:"index",props:{limitType:{},mode:{}},emits:["uploadFile"],setup(n,{emit:j}){const F=n,N=j,T=i(null),_=i(null);async function C(e){const s=e.target.files[0],t=s.type;if("json"===F.mode){const e=await l(s),a=JSON.parse(e);return _.value={data:a,fileName:s.name,type:t},T.value=s.name,void N("uploadFile",_.value)}const{data:u,fileName:n}=await a(s);_.value={data:u,fileName:n,type:t},T.value=n,N("uploadFile",_.value)}function O(){_.value=null,N("uploadFile",null)}return(l,a)=>(c(),o("div",b,[r("input",{id:"file-upload",disabled:null!==_.value,type:"file",class:"w-full bg-red-400/50 max-h-52 cursor-pointer absolute",style:{display:"none"},accept:n.limitType,onChange:C},null,40,w),r("label",{for:"file-upload",class:f([_.value?"cursor-not-allowed":null,"w-full h-52 cursor-pointer border-2 border-dashed flex items-center justify-center overflow-hidden"])},[_.value&&_.value.type.includes("image")?(c(),o("img",{key:0,class:"w-full object-cover stroke-0",src:m(e)(_.value.data),alt:""},null,8,x)):_.value&&_.value.type.includes("audio")?(c(),p(m(s),{key:1,class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"})):(c(),o("div",h,[v(m(t),{class:"w-2/3 h-2/3 stroke-1 text-gray-500/50"}),a[0]||(a[0]=r("span",{class:"btn btn-neutral"},"点击上传",-1))]))],2),_.value?(c(),o("div",k,[r("p",g,y(T.value),1),r("button",{class:"btn btn-xs btn-square btn-ghost",onClick:O},[v(m(u))])])):d("",!0)]))}});export{j as _};
